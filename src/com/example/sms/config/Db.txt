CREATE DATABASE IF NOT EXISTS bankdb;
USE bankdb;

CREATE TABLE customers (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(120) NOT NULL,
  email VARCHAR(150) UNIQUE
);

CREATE TABLE accounts (
  id INT AUTO_INCREMENT PRIMARY KEY,
  customer_id INT NOT NULL,
  account_number VARCHAR(20) UNIQUE NOT NULL,
  balance DECIMAL(12,2) NOT NULL DEFAULT 0.00,
  FOREIGN KEY (customer_id) REFERENCES customers(id)
);

CREATE TABLE transactions (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  account_id INT NOT NULL,
  type ENUM('DEPOSIT','WITHDRAW','TRANSFER_IN','TRANSFER_OUT') NOT NULL,
  amount DECIMAL(12,2) NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  reference VARCHAR(40) NULL,
  FOREIGN KEY (account_id) REFERENCES accounts(id)
);

-- sample data
INSERT INTO customers(name,email) VALUES ('Alice','alice@example.com'),('Bob','bob@example.com');
INSERT INTO accounts(customer_id,account_number,balance) VALUES
 (1,'ACC1001',10000.00),
 (2,'ACC2001', 2500.00);
